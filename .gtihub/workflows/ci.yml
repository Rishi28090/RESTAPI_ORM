# A human-readable name for your workflow
name: Node.js CI

# 1. Controls when the workflow will run
on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

# 2. A workflow run is made up of one or more jobs
jobs:
  # The name of our job. You can name this anything.
  build:
    # 3. The type of runner that the job will run on
    runs-on: ubuntu-latest

    # 4. A sequence of tasks that will be executed
    steps:
      # 5. This is a pre-built "action" that checks out your repository's code onto the runner.
      # You need this so your job can access your code.
      - name: Checkout repository
        uses: actions/checkout@v4

      # 6. Another action to set up a specific version of Node.js.
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '16.x' # Use a specific version of Node.js

      # 7. Run commands using the runner's shell.
      # Installs dependencies. 'ci' is often preferred over 'install' in CI environments
      # because it's faster and uses the package-lock.json for exact versions.
      - name: Install dependencies
        run: npm ci

      # 8. Run the tests defined in your package.json
      - name: Run tests
        run: npm test